<div class="container">
  <%= form_with(model: [:admin, product], local: true) do |f| %>
    <div class="row mb-4">
      <div class="col-12 col-md-6 mb-4">
        <%= label_tag(:title, "Nombre") %>
        <%= f.text_field :title, class: "form-control", required: true %>
      </div>
      <div class="col-12 col-md-6">
        <%= label_tag(:brand, "Marca") %>
        <%= f.text_field :brand, class: "form-control" %>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-6">
        <div class="mb-4">
          <%= label_tag(:price, "Precio") %>
          <%= f.number_field :price, class: "form-control",
            required: true %>
        </div>
      </div>
      <div class="col-12 col-md-6">
        <div class="mb-4">
          <%= label_tag(:quantity, "Cantidad") %>
          <%= f.number_field :quantity, class: "form-control",
            required: true %>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4">
        <div class="mb-4">
          <%= label_tag(:category, "Categoría") %>
          <% categories = Product.categories.
            map { |category| [category.humanize, category] } %>
          <%= f.select(:category, options_for_select(categories,
            :selected => f.object.category), {include_blank: true},
            class: "form-select", required: true) %>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="mb-4">
          <%= label_tag(:subcategory, "Subcategoría") %>
          <% categories = Product.subcategories.
            map { |subcategory| [subcategory.humanize, subcategory] } %>
          <%= f.select(:subcategory, options_for_select(categories,
            :selected => f.object.subcategory), {include_blank: true},
            class: "form-select") %>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="mb-4">
          <%= label_tag(:option, "Opción") %>
          <% options = Product.options.
            map { |product| [product.humanize, product] } %>
          <%= f.select(:option, options_for_select(options,
            :selected => f.object.option),
            {include_blank: true}, class: "form-select", required: true) %>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="mb-4">
          <%= label_tag(:size, "Tamaño") %>
          <% sizes = Product.sizes.
            map { |size| [size.humanize.upcase, size] } %>
          <%= f.select(:size, options_for_select(sizes,
            :selected => f.object.size),
            {include_blank: true}, class: "form-select", required: true) %>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="mb-4">
          <%= label_tag(:fit, "Fits like") %>
          <% sizes = Product.fits_like.
            map { |size| [size.humanize.upcase, size] } %>
          <%= f.select(:fit, options_for_select(sizes,
            :selected => f.object.fit),
            {include_blank: true}, class: "form-select") %>
        </div>
      </div>
    </div>

    <div class="mb-4">
      <label >Foto principal</label>
      <div class="form-file">
        <%= f.file_field :main_image, class: "form-file-input", id: "productImage" %>
        <label class="form-file-label" for="productImage">
          <span class="form-file-text">Seleccionar...</span>
          <span class="form-file-button">Buscar</span>
        </label>
      </div>
    </div>
    <br>
    <div class="row mt-4">
      <div class="col">
        <%= link_to "Cancelar", admin_products_path, class: "btn btn-outline-danger btn-block"  %>
      </div>
      <div class="col">
        <%= f.submit "Salvar", class: "btn btn-outline-dark btn-block" %>
      </div>
    </div>
  <% end %>
</div>

<script>
  $('#productImage').on('change',function(){
    let fileName = $(this).val();
    $('.form-file-text').html(fileName);
  })
</script>
